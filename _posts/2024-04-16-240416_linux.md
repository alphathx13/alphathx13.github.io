---
title: 240416_linux
date: 2024-04-16 12:00:00 +0800
categories: [Linux 서버 이야기]
tags: [linux, 서버관리, nginx, pure-ftpd, mariadb]
math: false
mermaid: true
image:
  path: assets/img/linux.png
---

<hr style="border:1px solid white">
[linux, nginx, 서버관리]

## 서버관리 1번째 이야기
```
여기 서버관리자인 `K`가 있다고 생각해보자

K는 새로운 서버를 오픈하고 이를 상업적으로 활용하려고 한다.

이를 위해 nginx 서버를 구축하고, 클라이언트들을 모집했고, 이때 A라는 클라이언트가 K의 서버를 사용하기로 계약하였다.

A는 'Test'라는 사이트를 오픈하기로 하였고, K는 Test에 대한 데이터를 nginx 서버에 업로드하였다.



K는 매번 A에게 사이트 변경내역을 받아서 업로드하는것이 번거롭다고 생각하였따
-> 그렇다고 K 자신의 nginx 서버 계정을 알려주자니, A가 서버의 root 권한을 가진다는것이 마음에 걸림
-> 그래서 A에게 자신의 사이트인 test에만 접근할 수 있는 계정을 만들어서 알려주기로 결정

이를 위해서 K는 pure-ftpd를 사용하기로 결정하고, mariadb를 연동해서 계정을 관리하기로 결정
-> mariadb에 A가 자신의 사이트에 접근할 수 있는 계정을 생성하고 A에게 제공
-> 이제 K는 직접 업로드 할 필요도 없게되었고, 이후에 다른 클라이언트과 계약을 할때, mariadb를 통해서 새로운 사이트 추가 및 변경을 편하게 관리할 수 있음
```

## Rocky Linux 설치 및 기본 설정
> ![111](https://github.com/alphathx13/alphathx13.github.io/assets/163115993/20897852-e2d0-470a-9eb2-e8ddec931ceb){: .normal}
- 매번 포트포워딩하는것을 피하기 위해 호스트 전용 어댑터 설정

<br/>

```bash
nmcli con show

nmcli con up enp0s3
nmcli con down enp0s3
```
> ![enp0s3](https://github.com/alphathx13/alphathx13.github.io/assets/163115993/bd1c8bbe-e34d-4921-90e3-7c3ef907a542){: .normal}
- 네트워크 인터페이스 활성화 및 비활성화

```bash
vi /etc/sysconfig/network-scripts/ifcfg-enp0s3
```
```vi
ONBOOT=yes
```
- NAT용 enp0s3의 네트워크 설정 변경 -> onboot 값을 부팅시 시작으로

<br/>

> ![111](https://github.com/alphathx13/alphathx13.github.io/assets/163115993/77847357-3bc2-4c74-999c-caa737a493bb){: .normal}
- Virtual box의 도구 - 네트워크 - 속성 - 호스트 전용 네트워크에서 사용할 IPv4 주소로 설정

